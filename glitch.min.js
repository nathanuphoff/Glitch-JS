var glitch=function(){"use strict";function c(a,b,c,g){if("string"!=typeof a)return i("An image source is required");if("function"!=typeof b)return i("A callback Function is required");c=j(c,5,100)||25,g=j(g,5,100)||50;var h=/data:[\w\/\w]+;base64,/i.test(a);h?f(e(this,a,b,c),g):d(this,a,b,c,g)}function d(a,b,d,e,f){var g=new XMLHttpRequest;g.open("GET",b),g.overrideMimeType("text/plain;charset=x-user-defined"),g.onload=function(){var b=g.response,h=b.substring(0,24).match(/[JFIF|GIF|PNG]+/i);if(h){var i=/JFIF/i.test(h[0])?"jpeg":h[0].toLowerCase(),j=k(b,"image/"+i);c.call(a,j,d,e,f)}},g.onerror=function(){i("The image could not be loaded")},g.send()}function e(a,b,c,d){function g(a){var b=a.length,c=Math.sqrt(b*(parseFloat("1e"+b.toString().length)/d)),e=b/c;return a.match(new RegExp(".{1,"+Math.ceil(b/e)+"}","g"))}var e=b.split(","),f=g(e[1],d);return{context:a,source:b,callback:c,strength:d,attempts:0,header:e[0]+",",data:f,slice:f[f.length-1].length}}function f(a,c){function k(a,c,d){for(var e=j(0|d/10,1,10);e--;){var f=Math.random()*c|0,g=b.charAt(64*Math.random()|0);a=a.substring(0,f)+g+a.substring(++f)}return a}var d=a.data,e=[a.header];if(++a.attempts<c){for(var f=0,i=d.length;i>f;++f)e.push(k(d[f],a.slice,c));g(e.join(""),a,c)}else h(a.source,!1,a)}function g(a,b,c){var d=document.createElement("canvas"),e=d.getContext("2d"),g=new Image;g.onload=function(){e.drawImage(g,0,0,2,3);for(var l,d=e.getImageData(0,0,2,3).data,i=0,j=d.length,k=!1;j>i;){var m=d[i++],n=d[i++],o=d[i++],q=(d[i++],0|(m+n+o)/3);if(l===q){k=!0;break}l=q}k?f(b,c):h(a,!0,b)},g.onerror=function(){f(b,c)},g.src=a}function h(a,b,c){c.callback.call(c.context,a,b,{source:c.source,strength:c.strength,attempts:c.attempts})}function i(a){console.error(a)}function j(a,b,c){return b>a?b:a>c?c:a}function k(a,c){for(var g,h,i,d=["data:"+c+";base64,"],e=0,f=a.length;f>e;){if(g=255&a.charCodeAt(e++),e===f){d.push(b.charAt(g>>2)),d.push(b.charAt((3&g)<<4)),d.push("==");break}if(h=a.charCodeAt(e++),e===f){d.push(b.charAt(g>>2)),d.push(b.charAt((3&g)<<4|(240&h)>>4)),d.push(b.charAt((15&h)<<2)),d.push("=");break}i=a.charCodeAt(e++),d.push(b.charAt(g>>2)),d.push(b.charAt((3&g)<<4|(240&h)>>4)),d.push(b.charAt((15&h)<<2|(192&i)>>6)),d.push(b.charAt(63&i))}return d.join("")}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return c}();